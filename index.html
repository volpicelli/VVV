<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.0//EN" "http://www.wapforum.org/DTD/xhtml-mobile10.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Documento senza titolo</title>
		<link type="text/css" rel="stylesheet" href="css/jquery.mobile.css" />
		<link type="text/css" rel="stylesheet" href="css/mobile.css" />
		<script type="text/javascript" src="js/modernizr.min.js"></script>
		<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&libraries=places"></script> 
		<script type="text/javascript" src="js/jquery.min.js"></script>
		<script type="text/javascript" src="js/jquery.mobile.min.js"></script>
		<script type="text/javascript" src="js/jquery.ui.autocomplete.min.js"></script>
		<script type="text/javascript" src="js/demo.js"></script>
		<script type="text/javascript" src="js/jquery.ui.map.js"></script>
		<script type="text/javascript" src="js/jquery.ui.map.services.js"></script>
		<script type="text/javascript" src="js/jquery.ui.map.extensions.js"></script>
        <script type="text/javascript" src="js/geo.js"></script>
<script type="text/javascript">
			var geocoder = new google.maps.Geocoder();
			directionsDisplay = new google.maps.DirectionsRenderer();
			var directionsService = new google.maps.DirectionsService();
			var origin = null;
			var destination = ' via San Secondo , 35 , 10128 Torino,Italia ';

$(function(){		
	var mygeopos;	
	//var geocoder= null;
	
	var oberto = ' via Sna Secondo , 35 , 10128 Torino,Italia ';	
	


		
	if (navigator.geolocation) 
        {  
         
		  navigator.geolocation.getCurrentPosition(function(position) {

				  var pyrmont = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
				  lat = position.coords.latitude;
				  lng = position.coords.longitude;
				  $('#precisione').text( ' ( precisione m. : '+ position.coords.accuracy+ ' )');
		
		
		
				  geocoder.geocode({'latLng': pyrmont}, function(results, status) {
					  if (status == google.maps.GeocoderStatus.OK &&  results[0]) {
						  alert(results[0].formatted_address + pyrmont);
						  origin = results[0].formatted_address;
						  //$('a[rel=markhome]').text("Are you home? Save the location");
						  mygeopos = pyrmont;
						  map = new google.maps.Map(document.getElementById('map'), {
							mapTypeId: google.maps.MapTypeId.ROADMAP,
							center: mygeopos,
							zoom: 16
						  });
						  
						  var marker = new google.maps.Marker({
							map: map,
							position: pyrmont,
							icon : 'images/you.png'
						  });
						  
	
						  codeAddress(destination);
						  directionsDisplay.setMap(map);
						  directionsDisplay.setPanel(document.getElementById("directions"));

						  var request = {
    origin:origin,
    destination:destination,
    travelMode: google.maps.TravelMode.DRIVING
  };
  directionsService.route(request, function(result, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      directionsDisplay.setDirections(result);
    }
  });
						   
						  //map.panTo(mygeopos);
						  /*
						  geocoder.geocode( { 'address': ' via San Secondo , 35 , 10128 Torino,Italia '}, function(results, status) {
							  if (status == google.maps.GeocoderStatus.OK) {
							  alert(results[0].geometry.location);
							  					  var marker = new google.maps.Marker({
							map: map,
							position: results[0].geometry.location,
							icon : 'images/toro.png'
						  });
							  } else {
								  alert(google.maps.GeocoderStatus);
								  
							  }
						  });
						  */
						  //geocode({ 'address': oberto });
						  
					  }
				  });
			  

          });
		  /*
		  map = new google.maps.Map(document.getElementById('map'), {
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            center: mygeopos,
            zoom: 14
          });
           */ 
		  
		} else {  
              alert("You don't support geolocation and a lot of the features in this demo sorry");
            } 
			
		//$('#directions_map').on('pageinit', function() {
			
			

		//});
});



function codeAddress(address) {
    //var address = document.getElementById("address").value;
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
       // map.setCenter(results[0].geometry.location);
		map.panTo(results[0].geometry.location);
        var marker = new google.maps.Marker({
            map: map,
			icon : 'images/toro.png',
            position: results[0].geometry.location
        });
      } else {
        alert("Geocode was not successful for the following reason: " + status);
      }
    });
  }

 



        </script>
<script type="text/javascript">
function prova() {
	alert(" Sei un pollo");
	
} 
</script>
</head>

<body>
<div data-role="page" id="HomePage">
  <div data-role="header" align="center">
    <h1>Vetrine Virtuali</h1>
    <div data-role="fieldcontain">
      <label for="textinput">Cerca:</label>
      <input type="text" name="textinput" id="textinput" value="Inserisci una categoria"  />
    </div>
  </div>
  <div data-role="content" align="center">
    <div class="ui-grid-a">
      <div class="ui-block-a " style="margin-left:auto; margin-right:auto"><a href="#Page0" data-role="button"><img  src="images/png/Gears.png" alt="" /></a></div>
      <div class="ui-block-b"><a href="#Page1" data-role="button"><img src="images/png/Wallet.png" alt="" width="128" height="128" /></a></div>
      
      <div class="ui-block-a"><a href="#Page2" data-role="button"><img src="images/png/AddressBook.png" alt="" width="128" height="128" /></a></div>
      <div class="ui-block-b"><a href="#Page3" data-role="button"><img src="images/png/Bank.png" alt="" width="128" height="128" /></a></div>
      
    </div>
  
  </div>
  <div data-role="footer">
    <h4>Piè di pagina</h4>
  </div>
</div>
<!-- Page 0 -->
<div data-role="page" id="Page0" data-add-back-btn=true>
  <div data-role="header"  >
  <!--
  <a href="#HomePage" data-role="button" data-icon="back" data-theme="a" data-transition="pop">Back</a> -->
    <h1>Intestazione Page 0 </h1>
  </div>
  <div data-role="content">
    <h2>Rilevamento posizione  <span id="precisione"> </span></h2>
    <div id="map" style="height:300px;"></div>
    <span>Indicazioni stradali </span> 
                    					<div id="directions"></div>
  </div>
  <div data-role="footer">
    <h4>Piè di pagina</h4>
  </div>
</div>
<!-- Page 1 -->
<div data-role="page" id="Page1" data-add-back-btn=true>
  <div data-role="header">
    <h1>Intestazione Page 1 </h1>
  </div>
  <div data-role="content">
    <div class="ui-grid-b">
      <div class="ui-block-a">Blocco di testo 1,1</div>
      <div class="ui-block-b">Blocco di testo 1,2</div>
      <div class="ui-block-c">Blocco di testo 1,3</div>
      <div class="ui-block-a">Blocco di testo 2,1</div>
      <div class="ui-block-b">Blocco di testo 2,2</div>
      <div class="ui-block-c">Blocco di testo 2,3</div>
    </div>
  </div>
  <div data-role="footer">
    <h4>Piè di pagina</h4>
  </div>
</div>
<!-- Page 2 -->
<div data-role="page" id="Page2" data-add-back-btn=true>
  <div data-role="header">
    <h1>Intestazione Page 2 </h1>
  </div>
  <div data-role="content">
    <div class="ui-grid-b">
      <div class="ui-block-a">Blocco di testo 1,1</div>
      <div class="ui-block-b">Blocco di testo 1,2</div>
      <div class="ui-block-c">Blocco di testo 1,3</div>
      <div class="ui-block-a">Blocco di testo 2,1</div>
      <div class="ui-block-b">Blocco di testo 2,2</div>
      <div class="ui-block-c">Blocco di testo 2,3</div>
    </div>
  </div>
  <div data-role="footer">
    <h4>Piè di pagina</h4>
  </div>
</div>
<!-- Page 3 -->
<div data-role="page" id="Page3" data-add-back-btn=true>
  <div data-role="header">
    <h1>Intestazione Page 3 </h1>
  </div>
  <div data-role="content">
    <div class="ui-grid-b">
      <div class="ui-block-a">Blocco di testo 1,1</div>
      <div class="ui-block-b">Blocco di testo 1,2</div>
      <div class="ui-block-c">Blocco di testo 1,3</div>
      <div class="ui-block-a">Blocco di testo 2,1</div>
      <div class="ui-block-b">Blocco di testo 2,2</div>
      <div class="ui-block-c">Blocco di testo 2,3</div>
    </div>
  </div>
  <div data-role="footer">
    <h4>Piè di pagina</h4>
  </div>
</div>
<!-- Page 4 -->




</body>
</html>
